"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[735],{465:(e,t,o)=>{o.d(t,{A:()=>n});o(43);const s="container_conatiner__xS-Ti";var r=o(579);const n=e=>(0,r.jsx)("div",{className:s,children:e.children})},735:(e,t,o)=>{o.r(t),o.d(t,{default:()=>u});var s=o(43),r=o(465);const n={Img:"profile_Img__a2+g1",h4:"profile_h4__okSrB",optionlist:"profile_optionlist__70P9p",optionItem:"profile_optionItem__uUWhC"};var a=o(213),c=o(240),i=o(749),l=o(579);const d=()=>{const[e,t]=(0,s.useState)({}),[o,a]=(0,s.useState)([]),d=(0,s.useContext)(c.A).token,u=(0,s.useRef)(null);return(0,s.useEffect)((()=>{(async()=>{try{const e=await fetch("https://deployevelocity-project.onrender.com/api/v1/polls/create",{headers:{Authorization:d}}),o=await e.json();a(o.data);const s={};o.data.forEach((e=>{"object"===typeof e.voteCounts&&null!==e.voteCounts&&(s[e._id]=e.voteCounts)})),t(s)}catch(e){console.error("Error fetching polls:",e)}})()}),[d]),(0,s.useEffect)((()=>{if(!u.current)return u.current=(0,i.Ay)("https://deployevelocity-project.onrender.com",{query:{token:d}}),u.current.on("voteUpdate",(e=>{let{pollId:o,voteCounts:s}=e;console.log("voteUpdate event received:",{pollId:o,voteCounts:s}),t((e=>({...e,[o]:s})))})),u.current.on("voteError",(e=>{let{message:t}=e;console.error("Error:",t)})),()=>{u.current.disconnect()}}),[d]),(0,l.jsx)("div",{children:o.map((t=>(0,l.jsx)(r.A,{className:n.conatiner2,children:(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{children:t.question}),(0,l.jsx)("div",{className:n.optionlist,children:t.options.map(((o,s)=>{var r;return(0,l.jsxs)("div",{className:n.optionItem,children:[(0,l.jsx)("span",{children:o}),(0,l.jsx)("span",{children:(null===(r=e[t._id])||void 0===r?void 0:r[o])||0})]},s)}))})]})},t._id)))})},u=()=>{const e=(0,s.useContext)(c.A),[t,o]=(0,s.useState)(""),[i,u]=(0,s.useState)(""),[p,h]=(0,s.useState)(null),v=e.token;return(0,s.useEffect)((()=>{(async()=>{const e=await a.A.get("https://deployevelocity-project.onrender.com/api/v1/users/user-profile",{headers:{Authorization:v}});o(e.data.data.username),u(e.data.data.email),h(e.data.data.profilePicture)})()})),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(r.A,{children:[(0,l.jsx)("div",{children:(0,l.jsx)("img",{className:n.Img,src:p,alt:"Error"})}),(0,l.jsxs)("h4",{className:n.h4,children:["Name: ",t]}),(0,l.jsxs)("h4",{className:n.h4,children:["Email: ",i]})]}),(0,l.jsx)(d,{})]})}}}]);
//# sourceMappingURL=735.aa8bb671.chunk.js.map